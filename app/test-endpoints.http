### ==============================================
### API REST VETERINARIA - TESTS
### ==============================================

### Variables
@baseUrl = http://localhost:8080
@token = 

### ==============================================
### 1. AUTENTICACIÓN
### ==============================================

### 1.1 Login con usuario Admin
POST {{baseUrl}}/api/auth/login
Content-Type: application/json

{
  "username": "admin",
  "password": "admin123"
}

### 1.2 Login con usuario Veterinario
POST {{baseUrl}}/api/auth/login
Content-Type: application/json

{
  "username": "veterinario",
  "password": "vet123"
}

### 1.3 Registrar nuevo usuario
POST {{baseUrl}}/api/auth/register
Content-Type: application/json

{
  "username": "recepcionista01",
  "password": "recep123",
  "email": "recepcionista@vetdemo.com",
  "idVeterinaria": 1,
  "idRol": 3
}

### 1.4 Refresh Token
POST {{baseUrl}}/api/auth/refresh
Content-Type: application/json

{
  "refreshToken": "PEGA_AQUI_TU_REFRESH_TOKEN"
}

### ==============================================
### 2. PLANES (Requiere ROLE_ADMIN para crear/editar/eliminar)
### ==============================================

### 2.1 Listar todos los planes (público)
GET {{baseUrl}}/api/planes

### 2.2 Obtener plan por ID
GET {{baseUrl}}/api/planes/1

### 2.3 Crear nuevo plan (requiere ROLE_ADMIN)
POST {{baseUrl}}/api/planes
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "nombre": "Plan Premium",
  "precioMensual": 299.99,
  "maxDoctores": 25,
  "maxMascotas": 1000,
  "maxAlmacenamientoMb": 10240,
  "estado": "ACTIVO"
}

### 2.4 Actualizar plan (requiere ROLE_ADMIN)
PUT {{baseUrl}}/api/planes/1
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "idPlan": 1,
  "nombre": "Plan Básico Actualizado",
  "precioMensual": 109.99,
  "maxDoctores": 5,
  "maxMascotas": 100,
  "maxAlmacenamientoMb": 1024,
  "estado": "ACTIVO"
}

### 2.5 Eliminar plan (requiere ROLE_ADMIN)
DELETE {{baseUrl}}/api/planes/4
Authorization: Bearer {{token}}

### ==============================================
### 3. VETERINARIAS
### ==============================================

### 3.1 Listar todas las veterinarias
GET {{baseUrl}}/api/veterinarias
Authorization: Bearer {{token}}

### 3.2 Obtener veterinaria por ID
GET {{baseUrl}}/api/veterinarias/1
Authorization: Bearer {{token}}

### 3.3 Crear nueva veterinaria
POST {{baseUrl}}/api/veterinarias
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "idPlan": 2,
  "nombre": "Veterinaria Los Olivos",
  "ruc": "20555666777",
  "telefono": "945123456",
  "direccion": "Av. Los Olivos 456, Lima",
  "estado": "ACTIVO"
}

### ==============================================
### 4. CLIENTES
### ==============================================

### 4.1 Listar todos los clientes
GET {{baseUrl}}/api/clientes
Authorization: Bearer {{token}}

### 4.2 Crear nuevo cliente
POST {{baseUrl}}/api/clientes
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "idVeterinaria": 1,
  "nombres": "Carlos",
  "apellidos": "Rodríguez García",
  "tipoDocumento": "DNI",
  "documento": "72345678",
  "telefono": "987654321",
  "email": "carlos.rodriguez@email.com",
  "direccion": "Jr. Las Flores 123, Lima",
  "estado": "ACTIVO"
}

### ==============================================
### 5. MASCOTAS
### ==============================================

### 5.1 Listar todas las mascotas
GET {{baseUrl}}/api/mascotas
Authorization: Bearer {{token}}

### 5.2 Crear nueva mascota
POST {{baseUrl}}/api/mascotas
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "idVeterinaria": 1,
  "idCliente": 1,
  "idRaza": 1,
  "nombre": "Max",
  "sexo": "M",
  "fechaNacimiento": "2020-05-15",
  "color": "Dorado",
  "estado": "ACTIVO"
}

### ==============================================
### 6. PRODUCTOS (Requiere ROLE_ADMIN o ROLE_VETERINARIO)
### ==============================================

### 6.1 Listar todos los productos
GET {{baseUrl}}/api/productos
Authorization: Bearer {{token}}

### 6.2 Obtener producto por ID
GET {{baseUrl}}/api/productos/1
Authorization: Bearer {{token}}

### 6.3 Crear nuevo producto (requiere ROLE_ADMIN o ROLE_VETERINARIO)
POST {{baseUrl}}/api/productos
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "idCategoria": 1,
  "nombre": "Vacuna Antirrábica",
  "descripcion": "Vacuna para prevención de rabia",
  "esMedicamento": true,
  "precioUnitario": 45.00,
  "estado": "ACTIVO"
}

### 6.4 Actualizar producto (requiere ROLE_ADMIN o ROLE_VETERINARIO)
PUT {{baseUrl}}/api/productos/1
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "idProducto": 1,
  "idCategoria": 1,
  "nombre": "Antibiótico Amoxicilina 500mg",
  "descripcion": "Antibiótico de amplio espectro - dosis aumentada",
  "esMedicamento": true,
  "precioUnitario": 35.50,
  "estado": "ACTIVO"
}

### 6.5 Eliminar producto (requiere ROLE_ADMIN)
DELETE {{baseUrl}}/api/productos/10
Authorization: Bearer {{token}}

### ==============================================
### 7. CITAS
### ==============================================

### 7.1 Listar todas las citas
GET {{baseUrl}}/api/citas
Authorization: Bearer {{token}}

### 7.2 Crear nueva cita
POST {{baseUrl}}/api/citas
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "idVeterinaria": 1,
  "idMascota": 1,
  "idDoctor": 1,
  "fechaHora": "2025-12-05T10:30:00",
  "motivo": "Control de vacunación",
  "estado": "PENDIENTE"
}

### ==============================================
### 8. HISTORIA CLÍNICA
### ==============================================

### 8.1 Listar todas las historias clínicas
GET {{baseUrl}}/api/historias
Authorization: Bearer {{token}}

### 8.2 Crear nueva historia clínica
POST {{baseUrl}}/api/historias
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "idVeterinaria": 1,
  "idMascota": 1,
  "idDoctor": 1,
  "fechaAtencion": "2025-12-01T14:30:00",
  "diagnostico": "Infección respiratoria leve",
  "tratamiento": "Antibiótico oral por 7 días",
  "observaciones": "Control en una semana"
}

### ==============================================
### 9. COMPRAS
### ==============================================

### 9.1 Listar todas las compras
GET {{baseUrl}}/api/compras
Authorization: Bearer {{token}}

### 9.2 Crear nueva compra
POST {{baseUrl}}/api/compras
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "idVeterinaria": 1,
  "idProveedor": 1,
  "fecha": "2025-12-01T09:00:00",
  "total": 450.00,
  "estado": "PAGADA"
}

### ==============================================
### 10. VENTAS
### ==============================================

### 10.1 Listar todas las ventas
GET {{baseUrl}}/api/ventas
Authorization: Bearer {{token}}

### 10.2 Crear nueva venta
POST {{baseUrl}}/api/ventas
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "idVeterinaria": 1,
  "idCliente": 1,
  "fecha": "2025-12-01T15:45:00",
  "total": 85.50,
  "metodoPago": "Efectivo",
  "estado": "PAGADA"
}
